#基于整数的同态加密-对称方案日志
---
#2015/3/20 14：20

今天把对单个bit的加密解密做完了。把昨晚没弄仔细的噪音的生成给解决了。
解决办法是用//运算符（返回结果的整数部分）解决了

`p = randrange(2**(eta - 1) + 1, 2**eta, 2)`
测试对称方案中的加法和乘法。
加法成功通过测试
乘法测试失败

初步推测原因是噪音太大导致无法正确解密。

初步解决思路是控制参数的选取，从两方面入手

- 增大参数η的值，从而增大密钥p的值
- 控制噪音r的值，不让它太大从而影响乘法解密

###16：15 对乘法同态稳定的尝试

经过尝试，改变参数η的值不足以让乘法计算稳定，只有更改噪音r取值范围（上限改为`（p-2）/8+1/4`）之后乘法计算开始稳定

？问题：在进行乘法同态测试的时候，两个数的加密密钥相同，噪音相同。按照道理说，似乎两个数的加密密钥和噪音都要独立选取

- 接下来把对bit的加密写成模块，对每个bit都分别独立处理。

3/30/2015 5:10:18 PM 

之前的r控制范围不够控制乘法至稳定，只能让加法保持稳定。在η较小的时候乘法还能稳定。  

- r还需要更改。**

3/30/2015 8:40:44 PM 

在生成参数的时候经常偶尔会出现错误，初步推测原因是意味生成的p不合适，导致r的取值范围为空
> `p = 17`  
> `r is choosen form []`  
> `r = randrange(1,(p-2)//8+1/2,1)`

从这次错误的运行结果来看，是因为p太小的原因。`range()`生成列表元素都是整数，而r要求从1开始计算所以这次上限要大于等于2（`range(1,1)`为空列表`[]`）。所以要求p大于等于18，所以**η要大于等于6，或者限制从18开始选起**

3/30/2015 9:45:11 PM 

将bit的加密已经写成模块，加法同态也写成模块。  
不过在对两个bit加密的时候噪音相同。需要改进，每个bit加密时需要不同的噪音（应该是这样）  
接下来的工作  

- 改进加密模块，在对每一个bit加密的时候噪音为不同的（已通过测试）
- 改进bit加密测试模块。测试每一个bit的时候更简便一些
***
#3/31/2015 9:08:32 AM 

3/31/2015 9:14:16 AM 

- 疑问：q需不需要随机化？从SH方案的构成来看是需要随机化以便隐藏密钥。  
	- 暂处理方案：先测试q固定，r随机。然后让q随机。同时不按照文章中的要求`q≈2^(η^3)`那样了。先看看q随机行不行。【3/31/2015 9:52:49 AM 测试通过，q暂取范围为`range(2**(eta+1),2**(eta+2))`】
